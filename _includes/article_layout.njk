{% extends "layout.njk" %}

{% block head %}
<link rel="stylesheet" href="/public/styles/article.css">
<link rel="stylesheet" href="/public/styles/prism.css">
<script src="/src/article.js" defer></script>
{% endblock %}

{% block toc %}
{% if table_of_contents %}
<aside class="content-table">
  <h2 class="sidebar-heading">In this article</h2>
  <ul class="content-table-list">
    {% for item in table_of_contents %}
      <li>
        <a href="{{ item.href }}">{{ item.text }}</a>
        {% if item.children %}
          <ul>
          {% for child in item.children %}
            <li><a href="{{ child.href }}">{{ child.text }}</a></li>
          {% endfor %}
          </ul>
        {% endif%}
      </li>
    {% endfor %}
  </ul>
</aside>
{% endif %}
{% endblock %}

{% block content %}
<div class="article-wrapper">
  <h1>{{ title | default("My Blog") }}</h1>
  <p id="pub-date" class="article-details-pub-date">{{ date|localeDate }}
  </p>
  <p>‚è± <span id="time-to-read">{{ time_to_read }}</span> min{{ time_to_read | pluralize }} read</p>

  {% if table_of_contents %}
    <ul class="content-table-list sm-list">
      {% for item in table_of_contents %}
        <li>
          <a href="{{ item.href }}">{{ item.text }}</a>
          {% if item.children %}
            <ul>
            {% for child in item.children %}
              <li><a href="{{ child.href }}">{{ child.text }}</a></li>
            {% endfor %}
            </ul>
          {% endif%}
        </li>
      {% endfor %}
    </ul>
  {% endif %}

  {{ content | safe }}

  <div id="share=wrapper" class="share-wrapper">

    <button id="share-btn" class="share-btn">
      <img src="/public/images/share.svg" alt="share article" loading="lazy" decoding="async" />
      Share
    </button>
    <ul id="share-links-list" class="share-links-list">
      <li>
        <a href="https://bsky.app/intent/compose?text={{ title }}" class="link-elem" title="Share on Bluesky"
          target="_blank">
          <img src="/public/images/bluesky.svg" alt="bluesky icon" loading="lazy" decoding="async" />
          Bluesky
        </a>
      </li>
      <li>
        <a href="https://www.facebook.com/sharer/sharer.php?u={{ page.url|htmlBaseUrl(site.base) }}" class="link-elem"
          title="Share on Facebook" target="_blank">
          <img src="/public/images/facebook.svg" alt="facebook icon" loading="lazy" decoding="async" />
          Facebook
        </a>
      </li>
      <li>
        <a href="https://www.linkedin.com/shareArticle?url={{ page.url|htmlBaseUrl(site.base) }}&mini=true" class="link-elem"
          title="Share on LinkedIn" target="_blank">
          <img src="/public/images/linkedin.svg" alt="linkedin icon" loading="lazy" decoding="async" />
          LinkedIn
        </a>
      </li>
      <li>
        <button title="Get shareable link" data-link="{{ page.url|htmlBaseUrl(site.base) }}" id="share-copy-link"
          class="link-elem">
          <img src="/public/images/link.svg" alt="copy icon" loading="lazy" decoding="async" />
          <span>Copy Link</span>
        </button>
      </li>
    </ul>
  </div>

  <button id="up-btn" class="up-btn">
    <img src="{{ "/public/images/arrow-big-up.svg" | url }}" alt="go up icon" loading="lazy" decoding="async" />
  </button>
</div>
{% endblock %}
